<!DOCTYPE html>
<html>
<head>
  <title>DR Vision AI</title>
  <style>
    body { font-family: Arial; background:#f3f7ff; margin:0; }

    .header { padding:20px; text-align:center; background:white; }

    .tabs { display:flex; gap:10px; padding:10px; justify-content:center; }
    .tabs button { padding:8px 14px; border:0; background:#e6ecff; border-radius:6px; cursor:pointer; }
    .tabs .active { background:white; box-shadow:0 0 5px #ccc; }

    .card {
      background:white; width:70%; margin:20px auto; padding:20px;
      border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1);
    }

    .dropbox {
      border:2px dashed #c8d7ff; padding:30px; text-align:center;
      margin-top:10px; border-radius:10px; background:#f9fbff; position:relative;
    }
    .dropbox input { position:absolute; inset:0; opacity:0; cursor:pointer; }

    .result { margin-top:15px; padding:10px; background:#eef6ff; border-radius:8px; }
    .hidden { display:none; }
  </style>
</head>

<body>

<div class="header">
  <h2>DR Vision AI</h2>
  <p>Diabetic Retinopathy Detection System</p>
</div>

<div class="tabs">
  <button class="active">Analysis</button>
  <button>History</button>
  <button>Statistics</button>
</div>

<div class="card">
  <h3>Instructions</h3>
  <ul>
    <li>Upload a clear retinal fundus image</li>
    <li>Ensure optic disc & macula are visible</li>
    <li>AI will classify DR stage</li>
    <li>Takes 2â€“3 seconds</li>
  </ul>

  <input type="text" id="patientId" placeholder="Patient ID (Optional)" />

  <div id="drop" class="dropbox">
    <p>Drop your retinal image here<br><small>(JPG, PNG)</small></p>
    <input type="file" id="fileInput" accept="image/*">
  </div>

  <button id="analyzeBtn">Analyze</button>

  <div id="result" class="result hidden">
    <p><b>Severity:</b> <span id="severity"></span></p>
    <p><b>Confidence:</b> <span id="confidence"></span></p>
  </div>
</div>

<script>
  const fileInput = document.getElementById("fileInput");
  const analyzeBtn = document.getElementById("analyzeBtn");
  const resultBox = document.getElementById("result");
  const severity = document.getElementById("severity");
  const confidence = document.getElementById("confidence");

  let selectedFile = null;

  fileInput.addEventListener("change", e => {
    selectedFile = e.target.files[0];
  });

  analyzeBtn.addEventListener("click", async () => {
    if (!selectedFile) { alert("Please upload an image"); return; }

    const form = new FormData();
    form.append("file", selectedFile);

    const res = await fetch("/predict", { method: "POST", body: form });
    const data = await res.json();

    severity.textContent = data.severity;
    confidence.textContent = data.confidence;
    resultBox.classList.remove("hidden");
  });
</script>

</body>
</html>
